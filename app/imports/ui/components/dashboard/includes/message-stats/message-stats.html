<template name="Dashboard_MessageStats">
  {{#if isInitialDataReady}}
    {{#if messages.length}}
      <div class="dashboard-stats">
    		<h4 class="dashboard-stats-title">
    		  {{countText}}
    		  <a class="pointer" {{b 'click: markAllAsRead'}}>
            <i class="fa fa-times-circle" title="Mark all messages as read"></i>
          </a>
    		</h4>
        {{#each unreadMessages}}
      		<a class="dashboard-stats-message" href="{{this.url}}">
            {{#if this.extension}}
              <i class="fa fa-file-{{this.extension}}-o"></i>
            {{else}}
              <i class="fa fa-comment"></i>
            {{/if}}
        		<strong>{{this.fullName}}:</strong>
        		{{this.text}}
        		<span class="text-muted">{{this.timeString}} ago</span>
      		</a>
        {{/each}}
        {{#if hasItemsToLoad}}
          <button type="button" class="btn btn-secondary" {{b 'click: loadAll'}}>
            View all items
            {{#if isReady}}
              <span>({{hiddenUnreadMessagesNumber}} more)</span>
            {{else}}
              <i class="fa fa-spinner fa-pulse fa-fw margin-bottom"></i>
            {{/if}}
          </button>
        {{else}}
          {{#unless enableLimit}}
            <button type="button" class="btn btn-secondary" {{b 'click: enableLimit(true)'}}>
              <span>Hide</span>
              {{#if isReady}}
                <span>({{hiddenUnreadMessagesNumber}} items)</span>
              {{else}}
                <i class="fa fa-spinner fa-pulse fa-fw margin-bottom"></i>
              {{/if}}
            </button>
          {{/unless}}
        {{/if}}
    	</div>
      <hr>
    {{/if}}
  {{/if}}
</template>
